#include<stdio.h>
#include<time.h>
#include<conio.h>




int main(void) {
    int i = 0;
    int j = 0;
    int s = 0;
    char a;
    char c;
    char answer='0';
    char name[10] = { 0 };
    clock_t start, end;

    //�֐���`
    void sleep(double i);
    int score(int i);
    void littledragon(void);
    void skull(void);
    void dragon(void);


    //game start
    printf("\n\n����RENDA�@GAME����\n\n");
    printf("���̃Q�[���́A�E�҂��L�[�̘A�łɂ���ċ������Ȃ��瓴�A��i�݁A������|���~�j�Q�[���ł��B\n\n");
    printf("�`�������W���܂����H (yes�Ȃ�P�Ano�Ȃ�O�œ����Ă�������)\n");
    scanf("%c", &answer);
  

    if (answer=='1') {

        sleep(2);
        printf("�E�҂̖��O�����߂Ă�������\n");
        scanf("%s", name,10);
        //printf("%s", name);

        printf("�ǂ̃L�[�ŃQ�[�������܂����H�D���ȃA���t�@�x�b�g�̃L�[�������Ă�������\n");
        c = getchar();
        scanf("%c", &c);

        sleep(1);


        //stage1
        printf("\n\nGame Start!!!!!\n\n\n");
        sleep(2);
        printf("�E��%s�͓��A��i��ł���A�Ő[���ɂ̓^�J��������炵��\n\n",name);
        sleep(2);
        printf("�������̓��A�ɂ͑����̖������Z��ł��āA���l���̒���҂������Ă��������A���Ă����҂͈�l�����Ȃ��̂ł�����..\n\n");
        sleep(2);
        printf("�E��%s�͂܂��܂����A��i��ł���\n\n",name);
        sleep(2);


        //�퓬
        printf("���g���h���S�������ꂽ�I�I�I�I\n\n");
        sleep(2);
        littledragon();

        printf("\n\n�A�ł��Ė�����|�����I\n");

        printf("5�b�Ԃł��邾�� %c�̃L�[ �������Ă�������\n\n", c);
        sleep(1);


        //�J�E���g�_�E��
        for (i = 0; i < 3; i++) {
            sleep(1);
            printf("%d\n", 3 - i);
         }

        sleep(1);

        printf("Start!!\n");

        sleep(0);

        start = clock();

        end = start + 5000;


        while (end - clock() > 0) {
            if (_kbhit() == 1) {
                a = _getch();
                if (a == c) {
                    j++;
                }
            }
        }

        printf("Finish!!""\n");
        //end = clock();

        //printf("�W�v���Ă��܂�....\n");
        //printf("\n%d\n", end - start);
        sleep(2);
        s = score(j);

        printf("���g���h���S����%d�_���[�W��^�����I�I�I\n\n", s);

        sleep(2);

        //����_�P
        //�@�s�k
        if (s < 3500) {
            printf("���g���h���S���͋t�サ��\n\n");
            sleep(2);
            printf("���g���h���S���̍U���I�I10000�_���[�W�I\n\n");
            sleep(2);
            printf("�E��%s��HP��0�ɂȂ���\n\n",name);
            sleep(2);
            printf("GAME  OVER........\n\n");
            skull();
            printf("\n\n�Q�[�����I�����܂�\n");
        }
        else {
            //�AStage2
            printf("���g���h���S����HP��0�ɂȂ����I�I");
            sleep(2);
            printf("���g���h���S���͓��A�̉��ւƓ����čs����\n\n");
            sleep(2);
            printf("�E��%s�͓��A�̉��ւƐi��\n\n",name);
            sleep(2);
            printf("��̉����������Ă���...\n\n");
            sleep(2);
            printf("\n\n\n�`���A�̍Ő[���`\n\n");
            sleep(2);
            printf("�E��%s�͓��A�̍Ő[���ɂ��ǂ����\n\n", name);
            sleep(1);
            printf("��̑O�ɂ͓`���ɕ�����̎R...���̑O�ɑ傫�ȃh���S���������I�I�I\n\n");
            sleep(1);
            printf("�h���S�����P���Ă����I�I�I\n\n");
            dragon();
            sleep(1);

            //�퓬

            printf("\n\n�A�ł��Ė�����|�����I\n");

            printf("5�b�Ԃł��邾�� %c�̃L�[ �������Ă�������\n\n", c);
            sleep(1);


            //�J�E���g�_�E��
            for (i = 0; i < 3; i++) {
                sleep(1);
                printf("%d\n", 3 - i);
            }

            sleep(1);

            printf("Start!!\n");

            sleep(0);

            start = clock();

            end = start + 5000;

            j = 0;

            while (end - clock() > 0) {
                if (_kbhit() == 1) {
                    a = _getch();
                    if (a == c) {
                        j++;
                    }
                }
            }

            printf("Finish!!""\n");
            sleep(2);
            s = score(j);

            printf("�h���S����%d�_���[�W��^�����I�I�I\n\n", s);
            
            //����Q
            //�@�s�k
            if (s < 4000) {
                printf("�h���S���͋t�サ��\n\n");
                sleep(2);
                printf("�h���S���̍U���I�I10000�_���[�W�I\n\n");
                sleep(2);
                printf("�E��%s��HP��0�ɂȂ���\n\n", name);
                sleep(2);
                printf("GAME  OVER........\n\n");
                skull();
                printf("\n\n�Q�[�����I�����܂�\n");
            }
            else {
                //�AHAPPY END
                printf("�h���S����HP��0�ɂȂ����I�I");
                sleep(2);
                printf("�h���S���͓|�ꂽ\n\n");
                sleep(2);
                printf("�E��%s�͕�̎R����ɓ��ꂽ�I�I�I\n\n",name);
                sleep(2);
                printf("GAME CLEAR!!!!!!\n\n");
            }
        }



    }
    else {
        printf("�Q�[�����I�����܂��B\n");
    }

    return 0;
}

void sleep(double i)
{
    clock_t g;
    g = i * CLOCKS_PER_SEC + clock();
    while (g > clock()) {
        //������ǂݎ���Ă��J�E���g���Ȃ�
        if (_kbhit() == 1) {
            char b;
            b = _getch();
        }
    }
}

int score(int i) {
    int k;
    k = 50 * i + 2000;
    return k;
}


void skull(void) {
    printf("    �@�@�@������������������\n");
    printf("�@�@�@�@����������������������\n");
    printf("      ��������������������������\n");
    printf("�@�@������������������������������\n");
    printf("�@�@������������������������������\n");
    printf("�@�@������������������������������\n");
    printf("�@�@������������������������������\n");
    printf("�@�@�������@�@�����������@�@������\n");
    printf("�@�@�������@�@�����������@�@������\n");
    printf("�@�@�������@�@�����������@�@������\n");
    printf("�@�@�@��������������������������\n");
    printf("�@�@�@�@ ���������@�@��������\n");
    printf("�@�@�@�@�@�������������������@\n");
    printf("�@�@�@�@�@���@���@���@���@��\n");
}

void littledragon(void) {
    printf("�@�@�@�@�@���@�@�@�@�@�@��\n");
    printf("�@�@�@�@���@���@�@�@�@���@��\n");
    printf("�@�@�@�@���@�������������@��\n");
    printf("�@�@�@�@�����@�@�@�@�@�@����\n");
    printf("�@�@�@�@���@�@�@�@�@�@�@�@��\n");
    printf("�@�@�@�@���@���@�@�@�@���@��\n");
    printf("�@�@�@�@���@�@���@�@���@�@��\n");
    printf("�@�@�@���@���@�@�@�@�@�@���@��\n");
    printf("�@�@���@���@���@�@�@�@���@���@��\n");
    printf("�@���@�����@�������������@�����@��\n");
    printf("���@�@���@�����@�@�@�@�����@���@�@��\n");
    printf("�@�����@���@�������������@���@����\n");
    printf("�@�@�������@�@���@�@���@�@������\n");
    printf("�@���@�@�@�����@�@�@�@�����@�@�@��\n");
    printf("�@���@�����@�������������@�����@��\n");
    printf("    ���@�@���@�@�@�@�@�@���@�@��\n");
}

void dragon(void) {

    printf("\n\n");
    printf("�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@���@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@��\n");
    printf("�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�����@�@�@�@ �@�@�@�@�@�@�@�����������@�@�@�@�@�@�@�@�@����\n");
    printf("�@�@�@�@�@�@�@�@�@�@�@�@�@�������@�@�@�@ �@�@�@�@�����������@�@�@�@�@�@�����������@�@�@������\n");
    printf("�@�@�@�@�@�@�@�@�@�@�����������@�@�@�@�@ �@�@�@�@���@�@�@�@�@�@�����������@�@�@�@�@�@�@�@����������\n");
    printf("�@�@�@�@�@�@�@�@�@�����������@�@�@�@�@�@�@�@�@���������@�@�@�@ ���@�@�@�@�@�@�@�@�@�@�@�@ ����������\n");
    printf("�@�@�@�@�@�@�@�@�����������@�@�@�@�@�@�@�@�������������������������@�@�@�@�@�@�@�@�@�@�@�@  ����������\n");
    printf("             ������������       �@�@�@��������������������������������                        ������������\n");
    printf("�@�@�@�@�@�@�������������@�@�@�@�@�@�@�����@�@���������������������������@�@�@�@�@�@�@�@�@�@�@ ������������\n");
    printf("�@�@�@�@���������������@�@�@���@�������������������������������������������@�@�@�@�@�@�@�@�@�@�@��������������\n");
    printf("�@�@�@�����������������@�@�@�������������������������������������������������@�@�@�@�@�@�@�@�@�@����������������\n");
    printf("�@�@�@�����������������@�@�@�@�@�@�����������@�@�����������������������������@�@�@�@�@�@�@�@�@�@����������������\n");
    printf("�@�@�����������������@�@�@�@�@�@�@�@�@�@�@�@�@�@�������������������������������@�@�@�@�@�@�@�@�@����������������\n");
    printf("    �����������������@�@�@�@�@�@�@�@�@�@�@�����������������������������������@�@�@�@�@�@�@�@�@�@����������������\n");
    printf("�@�������������������@�@�@�@�@�����@�@�����@�������������������������������@�@�@�@�@�@�@�@�@�@ ������������������\n");
    printf("�@�������������������@�@�@�@�@�@�@�����@�@�@�@�����������������������������@�@�@�@�@�@�@�@�@�@������������������\n");
    printf("������������������             �@�@�@�@�@�@�@���������������������������@�@�@�@�@�@�@�@�@�@�@������������������\n");
    printf("�������������������@�@�@�@�@�@�@�@�@�@�@�@�@�������������������������@�@�@�@�@�@�@�@�@�@�@�@ ������������������\n");
    printf("�������������������@�@�@�@�@�@�@�@�@�@�@�@�@���������������������������@�@�@�@�@�@�@�@�@�@�@������������������\n");
    printf("�@�����������������@�@�@�@�@�@�@�@�@�@�@�@�������������������������@�@�@�@�@�@�@�@�@�@�@�@�@����������������\n");
    printf("�@�������������������@�@�@�@�@�@�@�@�@�@�@���������������������������@�@�@�@�@�@�@�@�@�@�@�@����������������\n");
    printf("�@�������������������@�@�@�@�@�@�@�@�@�@�@���������������������������������@�@�@�@�@�@�@�@ ������������������\n");
    printf("�@�������������������@�@�@�@�@�@�@�@�@�@�@���������������������������������@�@�@�@�@�@�@�@������������������\n");
    printf("�@�������������������@�@�@�@�@�@�@�@�@�@�@�����������������������������������@�@�@�@�@�@�@������������������\n");
    printf("�@�@�������������������@�@�@�@�@�@�@�@�@�������������������������������@�@�@�@�@�@�@�@�@ ������������������\n");
    printf("�@�@�������������������@�@�@�@�@�@�@�@�����������������������������@�@�@�@�@�@�@�@�@�@�@������������������\n");
    printf("�@�@�����������������������@�@�@�@�@�@�����������������������������@�@�@�@�@�@�@�@�@�@�@������������������\n");
    printf("�@�@�����������������������@�@�@�@�@�@�����������������������������@�@�@�@�@�@�@�@�@�@��������������������\n");
    printf("�@�@�����������������������@�@�@�@�@�@�������������������������������@�@�@�@�@�@�@�@��������������������\n");
    printf("�@�@�����������������������@�@�@�@�@�@���������������������������������@�@�@�@�@�@����������������������\n");
    printf("      ����������������������        �����������������������������������@�@�@�@�@����������������������\n");
    printf("�@�@�@�������������������������@�@�@���������������������������������@�@�@�@�@������������������������\n");
    printf("�@�@�@�������������������������@�@�@���������������������������������@�@�@�@�@������������������������\n");
    printf("�@�@�@�����������������������������@�����������������������������@�@�@�@�@������������������������\n");
    printf("�@�@�@�@���������������������������@�������������������������������@�@�@��������������������������\n");
}